<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Elixir on the Raspberry Pi</title>

    <meta name="description" content="An introduction to Elixir using Nerves and the Raspberry Pi">
    <meta name="author" content="Frank Hunleth">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/simple.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
        if( window.location.search.match( /print-pdf/gi ) ) {
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = 'css/print/pdf.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        }
    </script>

    <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

    <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
    <section>
        <h2>Controls</h2>
        <p>
        <ul>
            <li>F1 - Toggle between presentation and IEx</li>
            <li>F2 - Enlarge IEx font size</li>
            <li>F3 - Reduce IEx font size</li>
            <li>F5 - Reload presentation</li>
            <li>Right arrow - Next slide</li>
            <li>Left arrow - Previous slide</li>
        </ul>
        </p>
        <p>
            Note: if focus is lost in the presentation, hit F5
        </p>
    </section>
    <section>
        <h1>Elixir on the RPi</h1>
        <h3>MoCo Programming Junkies 5/19/14</h3>
        <small>
            <p>
            Frank Hunleth<br/>
            <a href="http://twitter.com/fhunleth">@fhunleth</a>
            </p>
        </small>
    </section>

    <section>
        <h2>Agenda</h2>
        <ul>
            <li>Motivating Elixir and the Erlang VM</li>
            <li>Intro to Elixir</li>
            <li>Hacking the Raspberry Pi</li>
            <li>How this presentation was made</li>
        </ul>
    </section>

    <section>
        <h2>Erlang VM Languages</h2>
        <ul>
            <li>Erlang (of course)</li>
            <li><a href="https://github.com/rvirding/luerl">Lua</a></li>
            <li><a href="https://github.com/rvirding/lfe">LFE (Lisp Flavored Erlang)</a></li>
            <li><a href="http://joxa.org/">Joxa (LISP)</a></li>
            <li><a href="http://elixir-lang.org/">Elixir</a></li>
        </ul>
    </section>

    <section>
       <h2>API differences with Erlang</h2>
       <ul>
            <li>Function arguments - subject always first</li>
            <li>Everything is zero-based</li>
            <li>Macros used to create DSLs</li>
       </ul>
    </section>

    <section>
        <h2>Basic Types</h2>
        <pre><code data-trim>
# Integers
iex> 1 + 2 + 3
6

# Floats
iex> 1 / 3
0.333333333333333

# Atoms
iex> :hello
:hello

# Boolean
iex> 1 == 2
false
iex> :true == true
true
        </code></pre>
    </section>

    <section>
        <h2>More Types</h2>
        <pre><code data-trim>
# Tuples
iex> {1, 2 + 3}
{1, 5}

# Lists
iex> [1, :lookatme, {1, 2, 3}]
[1, :lookatme, {1, 2, 3}]

iex> [1, [2, 3]]
[1, 2, 3]

iex> [1, 2] ++ [3, 4]
[1, 2, 3, 4]

iex> length([1,2,3])
3
        </code></pre>
    </section>

    <section>
        <h2>Strings</h2>
        <pre><code data-trim>
# Strings are just like you'd expect unless you program Erlang
iex> "This is a UTF-8 encoded string"
"This is a UTF-8 encoded string"

iex> "Two times three is #{2 * 3}."
"Two times three is 6."

iex> String.length("hello")
5

# Strings are binaries underneath
iex> << ?H, ?e, ?l, ?l, ?o >>
"Hello"

# Erlang APIs like lists of characters
iex> [?H, ?e, ?l, ?l, ?o, ?, , ? , ?E, ?r, ?l, ?a, ?n, ?g]
'Hello, Erlang'
        </code></pre>
    </section>

    <section>
        <h2>Key-value Types</h2>
        <pre><code data-trim>
# This is a keyword list. It is used in function calls.
iex> x=[{:apple, 1}, {:banana, 2}]
[akey: 1, bkey, 2]
iex> Keyword.get(x, :apple)
1
iex> Keyword.put(x, :banana, 0)
[banana: 0, apple: 1]

# This is a map. Any type can be a key, and it's not a list.
iex> mymap = %{ :apple => 1, :banana => 2 }
%{apple: 1, banana: 2}
iex> mymap.apple
1
iex> %{mymap | :apple => 0}
%{apple: 0, banana: 2}
        </code></pre>
    </section>

    <section>
        <h2>The Dict interface</h2>
        <ul><li>All dictionary-like things implement the <code>Dict</code> interface</li>
            <li>Works for keyword lists and maps</li>
            <li><code>HashDict</code> also implements the interface and supports bigger dictionaries</li></ul>
        <pre><code data-trim>
iex> d = HashDict.new()
#HashDict<[]>

iex> d = Dict.put(d, :apple, 1)
#HashDict<[apple: 1]>

iex> d = Dict.put(d, :banana, 3)
#HashDict<[apple: 1, banana: 3]>

iex> Dict.get(d, :apple)
1
        </code></pre>
    </section>

    <section>
        <h2>defstruct</h2>
        <ul><li>Key-value data structure</li>
            <li>Efficient representation and operation</li>
            <li>Compile-time checked structures (new)</li>
            <li>Used for polymorphism in Elixir (new)</li>
        </ul>
    </section>
    <section>
        <h2>defstruct</h2>
        <pre><code data-trim>
iex> defmodule Person do
...>   defstruct name: nil, age: 0
...> end
{:module, Person, <<70, 79, 82, 49, 0, 0, 4, ...>>, {:__struct__, 0}}

iex> me = %Person{name: "Frank"}
%Person{age: 0, name: "Frank"}

iex> me.__struct__
Person

iex> me.name
"Frank"

iex> me = %{me | :age => 39}
%Person{age: 39, name: "Frank"}
        </code></pre>
    </section>

<section>
        <h2>Functions</h2>
        <pre><code data-trim>
iex> defmodule Greeter do
...>   def hi(name) do
...>     IO.puts("Hello, #{name}!")
...>   end
...> end
{:module, Greeter,
 <<70, 79, 82, 49, 0, 0, 5, 52, 66, 69, 65, 77, 65, 116, 111, ...>>,
 {:hi, 1}}

iex> Greeter.hi("Frank")
Hello, Frank!
:ok

iex> Greeter.hi "Frank"
Hello, Frank!
:ok
</code></pre>
</section>

<section>
        <h2>The Best Function in the World</h2>
        <pre><code data-trim>
iex> h

                                  IEx.Helpers

Welcome to Interactive Elixir. You are currently seeing the documentation
for the module IEx.Helpers which provides many helpers to make Elixir's
shell more joyful to work with.

This message was triggered by invoking the helper h(), usually referred to
as h/0 (since it expects 0 arguments).

There are many other helpers available:
...
</code></pre>
</section>

<section>
        <h2>Writing your own docs</h2>
        <pre><code>
iex> defmodule Greeter do
...>   @moduledoc "This is the Greeter module!"
...>   @doc "Say hi"
...>   def hi(name) do
...>     IO.puts "Hello, #{name}"
...>   end
...> end
{:module, Greeter, <<70, 79, 82, 49, 0, 0, 5, 104, 66, ...>>, {:hi, 1}}

iex> h Greeter.hi

                                  def_hi(name)

Say hi
</code></pre>
</section>

<section>
        <h2>Pattern Matching</h2>
        <ul>
        <li>The <code>=</code> means <i>match</i></li>
        <li>Elixir tries to make both sides of <code>=</code> match</li>
        <li>Variables can be rebound</li>
        <pre><code data-trim>
iex> {x, y} = {1,2}
{1, 2}

iex> x
1

iex> y
2

iex> x = 5
5
</code></pre>
</section>

<section>
        <h2>Pattern Matching</h2>
        <pre><code data-trim>
# ^ before a variable prevents rebinding
iex> {x, y} = {1,2}
{1, 2}

iex> {^x, y} = {2,2}
** (MatchError) no match of right hand side value: {2, 2}

# Use _ if you don't want to bind part of the match
iex> {x, _} = {1,2}
{1, 2}
</code></pre>
</section>

<section>
    <h2>Pattern Matching in Functions</h2>
    <pre><code data-trim>
iex> defmodule Math do
...>   def fact(0) do 1 end
...>   def fact(n) do n * fact(n-1) end
...> end
{:module, Math, <<70, 79, 82, 49, 0, 0, 4, 124, 66, 69, 65, ...>>,
 {:fact, 1}}

iex> Math.fact(5)
120

iex> Math.fact(25)
15511210043330985984000000
   </code></pre>
</section>

<section>
    <h2>Processes and Messages</h2>
    <pre><code data-trim>
iex> defmodule Greeter do
...>   def loop do
...>     receive do
...>       {sender, name} -> send sender, {:ok, "Hello, #{name}"}
...>                         loop
...>       :quit -> IO.puts "Bye bye"
...>     end
...>   end
...> end
{:module, Greeter, <<70, 79, 82, 49, 0, 0, 5, 236, 66, ...>>, {:loop, 0}}

iex> pid=spawn(Greeter, :loop, [])
#PID<0.304.0>
iex> send pid, {self, "Josh"}
iex> flush
{:ok, "Hello, Josh"}
:ok
   </code></pre>
</section>

<section>
    <h2>GenServer</h2>
<ul><li><code>spawn/3, send/2, receive</code> usually not used directly</li>
    <li>Elixir wraps these with <code>GenServer</code> (uses the Erlang <code>gen_server</code>)</li>
    <li>Features:</li>
    <ul><li>Message handling via callbacks</li>
        <li>Automatic process name registration</li>
        <li>Help with process supervision</li>
        <li>Hot code update</li>
    </ul>
    <li>Part of the OTP Framework from Erlang</li>
</ul>
</section>
<section>
        <h2>Clever Quotes</h2>
        <p>
                These guys come in two forms, inline: <q cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
                &ldquo;The nice thing about standards is that there are so many to choose from&rdquo;</q> and block:
        </p>
        <blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
                &ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would
                reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
        </blockquote>
</section>

<section>
        <section id="fragments">
                <h2>Fragmented Views</h2>
                <p>Hit the next arrow...</p>
                <p class="fragment">... to step through ...</p>
                <ol>
                        <li class="fragment"><code>any type</code></li>
                        <li class="fragment"><em>of view</em></li>
                        <li class="fragment"><strong>fragments</strong></li>
                </ol>

        </section>
        <section>
                <h2>Fragment Styles</h2>
                <p>There's a few styles of fragments, like:</p>
                <p class="fragment grow">grow</p>
                <p class="fragment shrink">shrink</p>
                <p class="fragment roll-in">roll-in</p>
                <p class="fragment fade-out">fade-out</p>
                <p class="fragment highlight-red">highlight-red</p>
                <p class="fragment highlight-green">highlight-green</p>
                <p class="fragment highlight-blue">highlight-blue</p>
                <p class="fragment current-visible">current-visible</p>
                <p class="fragment highlight-current-blue">highlight-current-blue</p>
        </section>
</section>

<section>
        <h2>Spectacular image!</h2>
        <a class="image" href="http://lab.hakim.se/meny/" target="_blank">
                <img width="320" height="299" src="http://s3.amazonaws.com/hakim-static/portfolio/images/meny.png" alt="Meny">
        </a>
</section>

<section>
        <h2>Export to PDF</h2>
        <p>Presentations can be <a href="https://github.com/hakimel/reveal.js#pdf-export">exported to PDF</a>, below is an example that's been uploaded to SlideShare.</p>
        <iframe id="slideshare" src="http://www.slideshare.net/slideshow/embed_code/13872948" width="455" height="356" style="margin:0;overflow:hidden;border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen> </iframe>
        <script>
                document.getElementById('slideshare').attributeName = 'allowfullscreen';
        </script>
</section>


    </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'none',

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
                { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
        });

    </script>

</body>
</html>
